 /*********************************************************************
 *  #### Twitter Post Fetcher v13.0 ####
 *  Coded by Jason Mayes 2015. A present to all the developers out there.
 *  www.jasonmayes.com
 *  Please keep this disclaimer with my code if you use it. Thanks. :-)
 *  Got feedback or questions, ask here:
 *  http://www.jasonmayes.com/projects/twitterApi/
 *  Github: https://github.com/jasonmayes/Twitter-Post-Fetcher
 *  Updates will be posted to this site.
 *********************************************************************/
!function(e,t){"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?module.exports=t():t()}(this,function(){function e(e){if(null===w){for(var t=e.length,n=0,s=document.getElementById(a),i="<ul>";t>n;)i+="<li>"+e[n]+"</li>",n++;i+="</ul>",s.innerHTML=i}else w(e)}function t(e){return e.replace(/<b[^>]*>(.*?)<\/b>/gi,function(e,t){return t}).replace(/class=".*?"|data-query-source=".*?"|dir=".*?"|rel=".*?"/gi,"")}function n(e){for(var t=e.getElementsByTagName("a"),n=t.length-1;n>=0;n--)t[n].setAttribute("target","_blank")}function s(e,t){for(var n=[],s=new RegExp("(^| )"+t+"( |$)"),i=e.getElementsByTagName("*"),a=0,l=i.length;l>a;a++)s.test(i[a].className)&&n.push(i[a]);return n}function i(e){if(void 0!==e){var t=e.innerHTML.match(/data-srcset="([A-z0-9%_\.-]+)/i)[0];return decodeURIComponent(t).split('"')[1]}}var a="",l=20,r=!0,o=[],c=!1,d=!0,p=!0,u=null,m=!0,h=!0,w=null,g=!0,f=!1,v=!0,b="en",y={fetch:function(e){if(void 0===e.maxTweets&&(e.maxTweets=20),void 0===e.enableLinks&&(e.enableLinks=!0),void 0===e.showUser&&(e.showUser=!0),void 0===e.showTime&&(e.showTime=!0),void 0===e.dateFunction&&(e.dateFunction="default"),void 0===e.showRetweet&&(e.showRetweet=!0),void 0===e.customCallback&&(e.customCallback=null),void 0===e.showInteraction&&(e.showInteraction=!0),void 0===e.showImages&&(e.showImages=!1),void 0===e.linksInNewWindow&&(e.linksInNewWindow=!0),c)o.push(e);else{c=!0,a=e.domId,l=e.maxTweets,r=e.enableLinks,p=e.showUser,d=e.showTime,h=e.showRetweet,u=e.dateFunction,w=e.customCallback,g=e.showInteraction,f=e.showImages,v=e.linksInNewWindow;var t=document.createElement("script");t.type="text/javascript",t.src="//cdn.syndication.twimg.com/widgets/timelines/"+e.id+"?&lang="+(e.lang||b)+"&callback=twitterFetcher.callback&suppress_response_codes=true&rnd="+Math.random(),document.getElementsByTagName("head")[0].appendChild(t)}},callback:function(a){var w=document.createElement("div");w.innerHTML=a.body,"undefined"==typeof w.getElementsByClassName&&(m=!1);var b=[],T=[],x=[],C=[],_=[],k=[],E=[],N=0;if(m)for(var I=w.getElementsByClassName("tweet");N<I.length;)_.push(I[N].getElementsByClassName("retweet-credit").length>0?!0:!1),(!_[N]||_[N]&&h)&&(b.push(I[N].getElementsByClassName("e-entry-title")[0]),k.push(I[N].getAttribute("data-tweet-id")),T.push(I[N].getElementsByClassName("p-author")[0]),x.push(I[N].getElementsByClassName("dt-updated")[0]),E.push(_[N]?"retweet":""),C.push(void 0!==I[N].getElementsByClassName("inline-media")[0]?I[N].getElementsByClassName("inline-media")[0]:void 0)),N++;else for(var I=s(w,"tweet");N<I.length;)b.push(s(I[N],"e-entry-title")[0]),k.push(I[N].getAttribute("data-tweet-id")),T.push(s(I[N],"p-author")[0]),x.push(s(I[N],"dt-updated")[0]),C.push(void 0!==s(I[N],"inline-media")[0]?s(I[N],"inline-media")[0]:void 0),s(I[N],"retweet-credit").length>0?(_.push(!0),E.push("retweet")):(_.push(!1),E.push("")),N++;b.length>l&&(b.splice(l,b.length-l),T.splice(l,T.length-l),x.splice(l,x.length-l),_.splice(l,_.length-l),C.splice(l,C.length-l),E.splice(l,E.length-l));for(var B=[],N=b.length,A=0;N>A;){if("string"!=typeof u){var L=x[A].getAttribute("datetime"),R=new Date(x[A].getAttribute("datetime").replace(/-/g,"/").replace("T"," ").split("+")[0]),F=u(R,L);if(x[A].setAttribute("aria-label",F),b[A].innerText)if(m)x[A].innerText=F;else{var M=document.createElement("p"),H=document.createTextNode(F);M.appendChild(H),M.setAttribute("aria-label",F),x[A]=M}else x[A].textContent=F}var U='<div class="single-tweet '+E[A]+'">';r?(v&&(n(b[A]),p&&n(T[A])),p&&(U+='<div class="user">'+t(T[A].innerHTML)+"</div>"),U+='<p class="tweet">'+t(b[A].innerHTML)+"</p>",d&&(U+='<p class="timePosted">'+x[A].getAttribute("aria-label")+"</p>")):b[A].innerText?(p&&(U+='<p class="user">'+T[A].innerText+"</p>"),U+='<p class="tweet">'+b[A].innerText+"</p>",d&&(U+='<p class="timePosted">'+x[A].innerText+"</p>")):(p&&(U+='<p class="user">'+T[A].textContent+"</p>"),U+='<p class="tweet">'+b[A].textContent+"</p>",d&&(U+='<p class="timePosted">'+x[A].textContent+"</p>")),g&&(U+='<p class="interact"><a href="https://twitter.com/intent/tweet?in_reply_to='+k[A]+'" class="twitter_reply_icon"'+(v?' target="_blank">':">")+'Reply</a><a href="https://twitter.com/intent/retweet?tweet_id='+k[A]+'" class="twitter_retweet_icon"'+(v?' target="_blank">':">")+'Retweet</a><a href="https://twitter.com/intent/favorite?tweet_id='+k[A]+'" class="twitter_fav_icon"'+(v?' target="_blank">':">")+"Favorite</a></p>"),f&&void 0!==C[A]&&(U+='<div class="media"><img src="'+i(C[A])+'" alt="Image from tweet" /></div>'),U+="</div>",B.push(U),A++}e(B),c=!1,o.length>0&&(y.fetch(o[0]),o.splice(0,1))}};return window.twitterFetcher=y,y});
